copyright:
- '#######################################################################'
- 'Copyright (c) 2017-2018, Lawrence Livermore National Security, LLC.'
- 'Produced at the Lawrence Livermore National Laboratory'
-
- 'LLNL-CODE-738041.'
- 'All rights reserved.'
-
- 'This file is part of Shroud.  For details, see'
- 'https://github.com/LLNL/shroud. Please also read shroud/LICENSE.'
-
- 'Redistribution and use in source and binary forms, with or without'
- 'modification, are permitted provided that the following conditions are'
- 'met:'
-
- '* Redistributions of source code must retain the above copyright'
- '  notice, this list of conditions and the disclaimer below.'
- 
- '* Redistributions in binary form must reproduce the above copyright'
- '  notice, this list of conditions and the disclaimer (as noted below)'
- '  in the documentation and/or other materials provided with the'
- '  distribution.'
-
- '* Neither the name of the LLNS/LLNL nor the names of its contributors'
- '  may be used to endorse or promote products derived from this'
- '  software without specific prior written permission.'
-
- 'THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS'
- '"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT'
- 'LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR'
- 'A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL LAWRENCE'
- 'LIVERMORE NATIONAL SECURITY, LLC, THE U.S. DEPARTMENT OF ENERGY OR'
- 'CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,'
- 'EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,'
- 'PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR'
- 'PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF'
- 'LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING'
- 'NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS'
- 'SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.'
-
- '#######################################################################'

# Test pointers and use of NumPy

library: pointers
cxx_header: pointers.hpp

#language: c

options:
  debug: True
  wrap_python: True
  wrap_lua: False

declarations:

- decl: void  intargs(const int argin      +intent(in),
                            int * arginout +intent(inout),
                            int * argout   +intent(out))

- decl: void cos_doubles(double * in     +intent(in)  +dimension(:),
                         double * out    +intent(out) +allocatable(mold=in),
                         int      sizein +implied(size(in)))
  doxygen:
    brief: compute cos of IN and save in OUT
    description:
      allocate OUT same type as IN
      implied size of array

- decl: void truncate_to_int(double * in     +intent(in)  +dimension(:),
                             int *    out    +intent(out) +allocatable(mold=in),
                             int      sizein +implied(size(in)))
  doxygen:
    brief: truncate IN argument and save in OUT
    description: |
      allocate OUT different type as IN
      implied size of array

- decl: void increment(int * array  +intent(inout)  +dimension(:),
                       int   sizein +implied(size(array)))
  doxygen:
    brief: 
    description: |
      array with intent(INOUT)

- decl: void get_values(int *nvalues+intent(OUT), int *values +intent(out)+dimension(3))
  doxygen:
    brief: fill values into array
    description: |
       The function knows how long the array must be.
       Fortran will treat the dimension as assumed-length.
       The Python wrapper will create a NumPy array so it must
       have an explicit dimension (not assumed-length).

- decl: void get_values2(int *arg1 +intent(out)+dimension(3),
                         int *arg2 +intent(out)+dimension(3))
  doxygen:
    brief: fill values into two arrays
    description: |
       Test two intent(out) arguments.
       Make sure error handling works with C++.
 
## test +allocatable(3)
## test +allocatable(nvar)
