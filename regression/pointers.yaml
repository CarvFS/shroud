copyright:
- '#######################################################################'
- 'Copyright (c) 2017-2019, Lawrence Livermore National Security, LLC.'
-
- 'Produced at the Lawrence Livermore National Laboratory'
-
- 'LLNL-CODE-738041.'
- ''
- 'All rights reserved.'
-
- 'This file is part of Shroud.'
-
- 'For details about use and distribution, please read LICENSE.'
-
- '#######################################################################'

# Test pointers and use of NumPy

library: pointers
cxx_header: pointers.hpp

#language: c

options:
  debug: True
  wrap_python: True
  wrap_lua: False

declarations:

- decl: void  intargs(const int argin      +intent(in),
                            int * arginout +intent(inout),
                            int * argout   +intent(out))

- decl: void cos_doubles(double * in     +intent(in)  +dimension(:),
                         double * out    +intent(out) +allocatable(mold=in),
                         int      sizein +implied(size(in)))
  doxygen:
    brief: compute cos of IN and save in OUT
    description:
      allocate OUT same type as IN
      implied size of array

- decl: void truncate_to_int(double * in     +intent(in)  +dimension(:),
                             int *    out    +intent(out) +allocatable(mold=in),
                             int      sizein +implied(size(in)))
  doxygen:
    brief: truncate IN argument and save in OUT
    description: |
      allocate OUT different type as IN
      implied size of array

- decl: void increment(int * array  +intent(inout)  +dimension(:),
                       int   sizein +implied(size(array)))
  doxygen:
    brief: 
    description: |
      array with intent(INOUT)

- decl: void get_values(int *nvalues+intent(OUT), int *values +intent(out)+dimension(3))
  doxygen:
    brief: fill values into array
    description: |
       The function knows how long the array must be.
       Fortran will treat the dimension as assumed-length.
       The Python wrapper will create a NumPy array so it must
       have an explicit dimension (not assumed-length).

- decl: void get_values2(int *arg1 +intent(out)+dimension(3),
                         int *arg2 +intent(out)+dimension(3))
  doxygen:
    brief: fill values into two arrays
    description: |
       Test two intent(out) arguments.
       Make sure error handling works with C++.
 
## test +allocatable(3)
## test +allocatable(nvar)
